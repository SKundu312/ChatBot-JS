<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with Chitti</title>
    <script src="https://kit.fontawesome.com/4f6fdaa8f3.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="bot.css">
    
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Otomanopee+One&display=swap" rel="stylesheet">
</head>
<body>
    <header>Chat with Chitti</header>
    <main>
        <div class="user-area">
            <img src="images/user.png">
        </div>
        
        <div class="chatarea-main">
            <div class="chatarea-outer">

            </div>
        </div>
    
        <div class="chatbot-area">
            <img src="images/chatbot.png">
        </div>
    </main>
        <button id="mic"><i class="fas fa-microphone-alt"></i></button>
    
    <script rel="text/javascript">
        var mic=document.getElementById("mic");
        var chatareaM=document.querySelector(".chatarea-main")
        var chatareaouter=document.querySelector(".chatarea-outer")
        var intro=["Hello, I am Chitti","Hi, I am a Robo","Hello,My name is Chitti"];
        var help=["How may I assist you?","Hpw can I help you?","What can I do for you?"]
        var greetings=["I am good you little piece of love","I am fine,what about you?","I am good"]
        var hobbies=["I love to talk with humans","I like to make friends like you"]
        var pizzas=["Which type of pizza do you like?","I can make a pizza for you","I would love to make a pizza for you","Would you like cheese pizza?"]
        var thank=["Most welcome","Not an issue","Its my pleasure","Mention not"]
        var closing =["Ok bye-bye","As you ,bye take care","Bye-bye,see you soon.."]
        var opening=["Hi,thanks for talking to me","Hi how are you?","Hello human"]
        var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition
        var Reco=new SpeechRecognition();

        function showusermsg(usermsg){
                 var output=''; 
                 output+=`<div class="chatarea-inner user">${usermsg}</div>`;
                 chatareaouter.innerHTML+=output;
                 return chatareaouter;
                }
        
        function showbotmsg(botmsg){
                 var output=''; 
                 output+=`<div class="chatarea-inner bot">${botmsg}</div>`;
                 chatareaouter.innerHTML+=output;
                 return chatareaouter;
                }
        
        function botvoice(message){
            var speech= new SpeechSynthesisUtterance();
            speech.text="Speak again please";
            if(message.includes("who are you")){
                var final=intro[Math.floor(Math.random()*intro.length)];
                speech.text=final;
            }
            if(message.includes("hello"||"hi")){   
                var final=opening[Math.floor(Math.random()*opening.length)];
                speech.text=final;
            }
            if(message.includes("help")){
                var final=help[Math.floor(Math.random()*help.length)];
                speech.text=final;
            }
            if(message.includes("how are you"||"how are you doing today")){
                var final=greetings[Math.floor(Math.random()*greetings.length)];
                speech.text=final;
            }
            if(message.includes("tell me something about you"||"tell me something about your hobbies")){
                var final=hobbies[Math.floor(Math.random()*hobbies.length)];
                speech.text=final;
            }
            if(message.includes("pizza")){
                var final=pizzas[Math.floor(Math.random()*pizzas.length)];
                speech.text=final;
            }
            if(message.includes("thank you"||"thank you so much")){
                var final=thank[Math.floor(Math.random()*thank.length)];
                speech.text=final;
            }
            if(message.includes("talk"||"bye")){
                var final=closing[Math.floor(Math.random()*closing.length)];
                speech.text=final;
            }
            window.speechSynthesis.speak(speech);
            chatareaM.appendChild(showbotmsg(speech.text))
        }

        Reco.onresult=function(e){
            var resultIndex=e.resultIndex;
            var transcript=e.results[resultIndex][0].transcript;
            chatareaM.appendChild(showusermsg(transcript));

            botvoice(transcript);
           console.log(transcript);
        }
        Reco.onend=function(){
            mic.style.background="#ff3b3b"
        }
        mic.addEventListener('click',function(){
            mic.style.background="#39c81f"
            Reco.start();
            console.log("Active")
        })
        </script>
</body>
</html>
